{"ast":null,"code":"var _jsxFileName = \"/Users/dhruv/AttendEase-Caffeine-Coders--1/FRONTEND/src/components/Forms/StartClassForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport \"../styles/Panel.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StartClassForm = ({\n  contract,\n  account,\n  subjects\n}) => {\n  _s();\n  const [selectedSubject, setSelectedSubject] = useState(\"\");\n  const [duration, setDuration] = useState(\"\");\n  const [geohash, setGeohash] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage(\"\");\n    try {\n      if (!selectedSubject) {\n        setMessage(\"Please select a subject\");\n        return;\n      }\n      const [sectionId, subjectId] = selectedSubject.split(\"-\");\n\n      // Get current location\n      if (\"geolocation\" in navigator) {\n        navigator.geolocation.getCurrentPosition(async position => {\n          try {\n            // Convert lat/long to geohash (you'll need to implement this)\n            const locationGeohash = position.coords.latitude.toString() + \",\" + position.coords.longitude.toString();\n            await contract.methods.startClass(parseInt(sectionId), parseInt(subjectId), locationGeohash, parseInt(duration)).send({\n              from: account\n            });\n            setMessage(\"Class started successfully!\");\n            setSelectedSubject(\"\");\n            setDuration(\"\");\n            setGeohash(\"\");\n          } catch (error) {\n            console.error(\"Error starting class:\", error);\n            setMessage(\"Error starting class. Please try again.\");\n          }\n        }, error => {\n          setMessage(\"Error getting location. Please enable location services.\");\n          console.error(\"Geolocation error:\", error);\n        });\n      } else {\n        setMessage(\"Geolocation is not supported by your browser\");\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n      setMessage(\"Error starting class. Please try again.\");\n    }\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Start New Class\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Subject:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedSubject,\n          onChange: e => setSelectedSubject(e.target.value),\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select a subject\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), subjects.map((subject, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: `${subject.sectionId}-${subject.subjectId}`,\n            children: [subject.name, \" (Section \", subject.sectionId, \")\"]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Duration (minutes):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: duration,\n          onChange: e => setDuration(e.target.value),\n          min: \"1\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-group\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          disabled: loading,\n          children: loading ? \"Starting...\" : \"Start Class\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `message ${message.includes(\"Error\") ? \"error\" : \"success\"}`,\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(StartClassForm, \"6Ji1E4Z0k8U/gcsdFcE30uYJNGs=\");\n_c = StartClassForm;\nexport default StartClassForm;\nvar _c;\n$RefreshReg$(_c, \"StartClassForm\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","StartClassForm","contract","account","subjects","_s","selectedSubject","setSelectedSubject","duration","setDuration","geohash","setGeohash","message","setMessage","loading","setLoading","handleSubmit","e","preventDefault","sectionId","subjectId","split","navigator","geolocation","getCurrentPosition","position","locationGeohash","coords","latitude","toString","longitude","methods","startClass","parseInt","send","from","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","required","map","subject","index","name","type","min","disabled","includes","_c","$RefreshReg$"],"sources":["/Users/dhruv/AttendEase-Caffeine-Coders--1/FRONTEND/src/components/Forms/StartClassForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"../styles/Panel.css\";\n\nconst StartClassForm = ({ contract, account, subjects }) => {\n  const [selectedSubject, setSelectedSubject] = useState(\"\");\n  const [duration, setDuration] = useState(\"\");\n  const [geohash, setGeohash] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage(\"\");\n\n    try {\n      if (!selectedSubject) {\n        setMessage(\"Please select a subject\");\n        return;\n      }\n\n      const [sectionId, subjectId] = selectedSubject.split(\"-\");\n      \n      // Get current location\n      if (\"geolocation\" in navigator) {\n        navigator.geolocation.getCurrentPosition(async (position) => {\n          try {\n            // Convert lat/long to geohash (you'll need to implement this)\n            const locationGeohash = position.coords.latitude.toString() + \",\" + position.coords.longitude.toString();\n            \n            await contract.methods\n              .startClass(\n                parseInt(sectionId),\n                parseInt(subjectId),\n                locationGeohash,\n                parseInt(duration)\n              )\n              .send({ from: account });\n\n            setMessage(\"Class started successfully!\");\n            setSelectedSubject(\"\");\n            setDuration(\"\");\n            setGeohash(\"\");\n          } catch (error) {\n            console.error(\"Error starting class:\", error);\n            setMessage(\"Error starting class. Please try again.\");\n          }\n        }, (error) => {\n          setMessage(\"Error getting location. Please enable location services.\");\n          console.error(\"Geolocation error:\", error);\n        });\n      } else {\n        setMessage(\"Geolocation is not supported by your browser\");\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n      setMessage(\"Error starting class. Please try again.\");\n    }\n    \n    setLoading(false);\n  };\n\n  return (\n    <div className=\"form-container\">\n      <h4>Start New Class</h4>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label>Subject:</label>\n          <select\n            value={selectedSubject}\n            onChange={(e) => setSelectedSubject(e.target.value)}\n            required\n          >\n            <option value=\"\">Select a subject</option>\n            {subjects.map((subject, index) => (\n              <option key={index} value={`${subject.sectionId}-${subject.subjectId}`}>\n                {subject.name} (Section {subject.sectionId})\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"form-group\">\n          <label>Duration (minutes):</label>\n          <input\n            type=\"number\"\n            value={duration}\n            onChange={(e) => setDuration(e.target.value)}\n            min=\"1\"\n            required\n          />\n        </div>\n\n        <div className=\"button-group\">\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\n            {loading ? \"Starting...\" : \"Start Class\"}\n          </button>\n        </div>\n      </form>\n      {message && (\n        <p className={`message ${message.includes(\"Error\") ? \"error\" : \"success\"}`}>\n          {message}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default StartClassForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}